<div class="login-con">
  <div class="login-form content-shadow">
    <form method="post" id="create-account-form">
      <fieldset>
        <div class="login_head_svg">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="30"
            height="30"
            viewBox="0 0 24 24"
          >
            <path
              fill="currentColor"
              d="M15,14C12.33,14 7,15.33 7,18V20H23V18C23,15.33 17.67,14 15,14M6,10V7H4V10H1V12H4V15H6V12H9V10M15,12A4,4 0 0,0 19,8A4,4 0 0,0 15,4A4,4 0 0,0 11,8A4,4 0 0,0 15,12Z"
            />
          </svg>
        </div>
        <h4>{{LANG create_new_account}}</h4>
        <!-- Username input-->
        <div class="errors hidden"></div>
        <div class="success hidden"></div>
        <div class="form-group yx_cus_input">
          <input
            id="username"
            name="username"
            type="text"
            class="form-control input-login"
            placeholder=""
            autofocus
          />
          <label for="username">{{LANG username}}</label>
        </div>
        <div class="form-group yx_cus_input">
          <input
            id="email"
            name="email"
            type="text"
            class="form-control input-login"
            placeholder=""
          />
          <label for="email">{{LANG email}}</label>
        </div>
        <!-- Password input-->
        <div class="form-group yx_cus_input">
          <input
            id="password"
            name="password"
            type="password"
            class="form-control input-login"
            placeholder=""
          />
          <label for="password">{{LANG password}}</label>
        </div>
        <!-- Password input-->
        <div class="form-group yx_cus_input">
          <input
            id="c_password"
            name="c_password"
            type="password"
            class="form-control input-login"
            placeholder=""
          />
          <label for="c_password">{{LANG c_password}}</label>
        </div>
        <?php if (is_array($yx['profile_fields']) && count($yx['profile_fields']) >
        0): ?>
        <div class="form-group">
          <?php foreach ($yx['profile_fields'] as $key =>
          $yx['field']): ?>
          <?php echo YX_LoadPage('register/fields'); ?>
          <?php endforeach; ?>
        </div>
        <?php endif; ?>
        <?php 
				if ($yx['config']['reCaptcha'] == 1) {
				?>
        <div class="form-group">
          <div class="g-recaptcha" data-sitekey="{{LANG reCaptcha_key}}"></div>
        </div>
        <?php } ?>

        <div class="terms">
          <input
            type="checkbox"
            name="accept_terms"
            id="accept_terms"
            onchange="activateButton(this)"
          />
          <label for="accept_terms">
            {{LANG terms_agreement}}
            <a href="{{LINK company/terms}}">{{LANG terms_of_use}}</a> &
            <a href="{{LINK company/privacy-policy}}"
              >{{LANG privacy_policy}}</a
            >
          </label>
          <div class="clear"></div>
        </div>

        <input type="hidden" name="hash_id" value="{{CREATE_SESSION}}" />

        <div class="login_signup_combo">
          <div class="signup__">
            <a class="dec" href="{{LINK login}}">{{LANG login}}</a>
          </div>
          <div class="login__">
            <button
              type="submit"
              class="btn btn-main"
              id="sign_submit"
              disabled
            >
              {{LANG sign_up}}
            </button>
          </div>
        </div>

        <div class="row">
          <?php if ($yx['login_with'] === true): ?>
          <div class="col-md-12">
            <p class="or-login">{{LANG or_connect_with}}</p>
          </div>
          <?php endif; ?>
          <?php if ($yx['config']['facebook'] == 1): ?>
          <div class="form-group login-with-button col-md-6">
            <a
              href="<?php echo $yx['facebookLoginUrl'];?>"
              class="btn btn-main btn-facebook"
              ><i class="fa fa-facebook"></i> {{LANG facebook}}</a
            >
          </div>
          <?php endif; ?>
          <?php if ($yx['config']['twitter'] == 1): ?>
          <div class="form-group login-with-button col-md-6">
            <a
              href="<?php echo $yx['twitterLoginUrl'];?>"
              class="btn btn-main btn-twitter"
              ><i class="fa fa-twitter"></i> {{LANG twitter}}</a
            >
          </div>
          <?php endif; ?>
          <?php if ($yx['config']['google'] == 1): ?>
          <div class="form-group login-with-button col-md-6">
            <a
              href="<?php echo $yx['googleLoginUrl'];?>"
              class="btn btn-main btn-google"
              ><i class="fa fa-google-plus"></i> {{LANG google_plus}}</a
            >
          </div>
          <?php endif ?>
          <?php if ($yx['config']['vkontakte'] == 1): ?>
          <div class="form-group login-with-button col-md-6">
            <a
              href="<?php echo $yx['vkLoginUrl'];?>"
              class="btn btn-main btn-vk"
              ><i class="fa fa-vk"></i> vk</a
            >
          </div>
          <?php endif ?>
        </div>
      </fieldset>

      <div class="yx_loading_bar">
        <svg
          width="120px"
          height="120px"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 100 100"
        >
          <g transform="translate(20 50)">
            <circle
              cx="0"
              cy="0"
              r="7"
              fill="#f05125"
              transform="scale(0.59121 0.59121)"
            >
              <animateTransform
                attributeName="transform"
                type="scale"
                begin="-0.5625s"
                calcMode="spline"
                keySplines="0.3 0 0.7 1;0.3 0 0.7 1"
                values="0;1;0"
                keyTimes="0;0.5;1"
                dur="1.5s"
                repeatCount="indefinite"
              ></animateTransform>
            </circle>
          </g>
          <g transform="translate(40 50)">
            <circle
              cx="0"
              cy="0"
              r="7"
              fill="#928efb"
              transform="scale(0.897436 0.897436)"
            >
              <animateTransform
                attributeName="transform"
                type="scale"
                begin="-0.375s"
                calcMode="spline"
                keySplines="0.3 0 0.7 1;0.3 0 0.7 1"
                values="0;1;0"
                keyTimes="0;0.5;1"
                dur="1.5s"
                repeatCount="indefinite"
              ></animateTransform>
            </circle>
          </g>
          <g transform="translate(60 50)">
            <circle
              cx="0"
              cy="0"
              r="7"
              fill="#7fbb42"
              transform="scale(0.987321 0.987321)"
            >
              <animateTransform
                attributeName="transform"
                type="scale"
                begin="-0.1875s"
                calcMode="spline"
                keySplines="0.3 0 0.7 1;0.3 0 0.7 1"
                values="0;1;0"
                keyTimes="0;0.5;1"
                dur="1.5s"
                repeatCount="indefinite"
              ></animateTransform>
            </circle>
          </g>
          <g transform="translate(80 50)">
            <circle
              cx="0"
              cy="0"
              r="7"
              fill="#32a0da"
              transform="scale(0.759663 0.759663)"
            >
              <animateTransform
                attributeName="transform"
                type="scale"
                begin="0s"
                calcMode="spline"
                keySplines="0.3 0 0.7 1;0.3 0 0.7 1"
                values="0;1;0"
                keyTimes="0;0.5;1"
                dur="1.5s"
                repeatCount="indefinite"
              ></animateTransform>
            </circle>
          </g>
        </svg>
      </div>
    </form>
  </div>
</div>

<style>
  .login-form .login_head_svg {
    background-color: rgba(76, 175, 80, 0.25);
    color: #4caf50;
  }
  .yx_cus_input label {
    padding: 10px 9px;
    min-width: 135px;
  }
</style>

<script type="text/javascript">
  $(function() {
    var create_account_form = $("form#create-account-form");
    var create_account_button = create_account_form.find("button");
    create_account_form.ajaxForm({
      url: YX_Ajax_Requests_File() + "?f=create_account",
      beforeSend: function() {
        create_account_button.attr("disabled", true);
        $(".yx_loading_bar").addClass("show");
      },
      success: function(data) {
        if (data.status == 200) {
          $(".errors").addClass("hidden");
          $(".success").removeClass("hidden");
          $(".success").html(data.message);
          setTimeout(function() {
            window.location.href = data.location;
          }, 2000);
        } else {
          console.log("errors here, not in error variable", data);
          $(".errors").html(data.errors);
          $(".success").addClass("hidden");
          $(".errors").removeClass("hidden");
          create_account_button.attr("disabled", false);
        }
        $(".yx_loading_bar").removeClass("show");
      }
    });
  });

  function activateButton(element) {
    if (element.checked) {
      document.getElementById("sign_submit").disabled = false;
    } else {
      document.getElementById("sign_submit").disabled = true;
    }
  }
</script>
